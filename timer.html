<html>
<head>
    <title>Count down timer</title>
	<meta http-equiv="X-UA-Compatible" content="IE=9" />
    <script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
    <style type="text/css">
        #timer {
            font-size: 120px;
            -moz-border-radius: 15px;
			-webkit-border-radius: 15px;
            border-radius: 15px;
            font-style: bold;
            font-family: sans-serif;
            border:5px solid #0F0; 
            color: #0F0;
            background-color: #CFC;
        }
        #timer.negative{ border:5px solid red; color: #F00; background-color: #FCC; }
    </style>
</head>
<body>
    <form onsubmit="reset_timer(); return false;">
		<input id="target" name="target" type="text"/>
	</form>
    <span id="timer">
        00:00:00 000
    </span> 

    <script type="text/javascript">
		deparam = function (querystring) {
		  // remove any preceding url and split
		  querystring = querystring.substring(querystring.indexOf('?')+1).split('&');
		  var params = {}, pair, d = decodeURIComponent;
		  // march and parse
		  for (var i = querystring.length - 1; i >= 0; i--) {
			pair = querystring[i].split('=');
			params[d(pair[0])] = d(pair[1]);
		  }

		  return params;
		};//--  fn  deparam
        var target = new Date().getTime();
        reset_timer = function(){
            var parts = $("#target").val().split(":");
			if(parts.length === 1){
				target = new Date().getTime() + (parseInt(parts[1]) * 60000);
			}
			else{
            target = new Date().getTime() + 
                (parseInt(parts[0]) * 360000) + 
                (parseInt(parts[1]) * 60000) + 
                (parseInt(parts[2]) * 1000);
			}			
        };
        to_time_string = function(timespan){
            var text =  "";
            if(timespan < 0){
              timespan = -timespan;
              text = "- ";
            } 
            var hours = Math.floor(timespan/3600000).toString();
            if(hours.length <2) hours = "0" + hours;
            var minutes = Math.floor((timespan%3600000)/60000).toString();
            if(minutes.length <2) minutes = "0" + minutes;
            var seconds = Math.floor((timespan%60000)/1000).toString();
            if(seconds.length <2) seconds = "0" + seconds;
            var milli = (timespan%1000).toString();
            if(milli.length <2) milli = "0" + milli;
            if(milli.length <3) milli = "0" + milli;
            var text =  text + hours + ":" + minutes + ":" + seconds + " " + milli ;
            return text;
        };

        to_milli_string = function(timespan){
            var milli = (timespan%1000).toString();
            if(milli.length <2) milli = "0" + milli;
            if(milli.length <3) milli = "0" + milli;
            return milli;
        }

        var timer;
        update_timer = function(){
            var diff = target - new Date().getTime();
            timer.text(to_time_string(diff));
            if(diff < 0) timer.addClass("negative");
            else timer.removeClass("negative");
        };
        $(function(){
            timer = $("#timer");
            setInterval(update_timer, 100);
			if(document.URL.indexOf('?') > 0){
				target = new Date().getTime() + (parseInt(deparam(document.URL).min) * 60000);
			}
        });
    </script>

</body>
</html>